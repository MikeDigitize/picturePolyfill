/*! picturePolyfill - v3.0.0 - 2014-03-28
* https://github.com/verlok/picturePolyfill/
* Copyright (c) 2014 Andrea "verlok" Verlicchi; Licensed MIT */
var picturePolyfill=function(a){"use strict";function b(){var a=document.createElement("img"),b=document.getElementsByTagName("picture")[0];try{return b&&(b.appendChild(a),b.removeChild(a)),!0}catch(c){return!1}}function c(a,b){var c=document.createElement("img");c.setAttribute("alt",b.alt),c.setAttribute("src",b.src),a.appendChild(c)}function d(a,b){var d=document.createElement("picture");c(d,b.src,b.alt),a.parentNode.replaceChild(d,a)}var e,f,g,h=100;return String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),{_pixelRatio:a.devicePixelRatio?Math.ceil(a.devicePixelRatio):1,_areMediaQueriesSupported:a.matchMedia&&null!==a.matchMedia("only all")&&a.matchMedia("only all").matches,_isAppendImageSupported:b(),isNecessary:!a.HTMLPictureElement,_getSrcsetHash:function(a){for(var b,c,d,e={},f=a.split(","),g=0,h=f.length;h>g;g+=1){switch(b=f[g].trim().split(" "),b.length){case 1:d="1x";break;case 2:d=b[1];break;default:d=b[b.length-1]}c=b[0],e[d]=c}return e},_getSrcFromSrcsetHash:function(a,b){var c;if(c=a[b+"x"])return c;do b-=1,c=a[b+"x"];while(!c&&b>0);if(c)return c;for(var d in a)return a[d];return null},_getSrcFromSourcesData:function(b){for(var c,d=0,e=b.length;e>d;d+=1){var f=b[d],g=f.media,h=f.srcset;(!g||a.matchMedia(g).matches)&&(c=h?this._getSrcFromSrcsetHash(h,picturePolyfill._pixelRatio):f.src)}return c},_createOrUpdateImage:function(a,b){var e=a.getElementsByTagName("img");e.length?e[0].setAttribute("src",b.src):picturePolyfill._isAppendImageSupported?c(a,b):d(a,b)},_getSources:function(a){for(var b=[],c=a.getElementsByTagName("source"),d=0,e=c.length;e>d;d+=1){var f=c[d],g=f.getAttribute("srcset"),h=f.getAttribute("media"),i=f.getAttribute("src"),j={};h&&(j.media=h),i&&(j.src=i),g&&(j.srcset=picturePolyfill._getSrcsetHash(g)),b.push(j)}return b},parse:function(a){var b,c,d,g;if(!this.isNecessary)return!1;d=(a||document).getElementsByTagName("picture");for(var h=0,i=d.length;i>h;h+=1)c=d[h],picturePolyfill._areMediaQueriesSupported?(b=e[c.getAttribute("data-cache-index")],b||(b=picturePolyfill._getSources(c),e[f]=b,c.setAttribute("data-cache-index",f),f+=1),g=picturePolyfill._getSrcFromSourcesData(b)):g=c.getAttribute("data-default-src"),picturePolyfill._createOrUpdateImage(c,{src:g,alt:c.getAttribute("data-alt")});return h},_addListeners:function(){function b(){picturePolyfill.parse(document)}function c(){clearTimeout(g),g=setTimeout(b,h)}a.addEventListener?(a.addEventListener("resize",c),a.addEventListener("DOMContentLoaded",function(){b(),a.removeEventListener("load",b)}),a.addEventListener("load",b)):a.attachEvent&&(a.attachEvent("onload",b),a.attachEvent("onresize",c)),this.areListenersActive=!0},initialize:function(){return this.isNecessary?(e=[],f=0,void(this.areListenersActive||this._addListeners())):!1}}}(window);picturePolyfill.initialize();