/*! picturePolyfill - v3.0.0 - 2014-03-30
* https://github.com/verlok/picturePolyfill/
* Copyright (c) 2014 Andrea "verlok" Verlicchi; Licensed MIT */
var picturePolyfill=function(a){"use strict";function b(){var a,b,c=document.createElement("img");if(a=document.getElementsByTagName("picture"),b=a[0],!a.length)return!1;try{return b.appendChild(c),b.removeChild(c),!0}catch(d){return!1}}function c(a,b){var c=document.createElement("img");d(c,b),a.appendChild(c)}function d(a,b){for(var c in b)a.setAttribute(c,b[c])}function e(a,b){for(var c,d,e={},f=0,g=b.length;g>f;f+=1)c=b[f],d=a.getAttribute(c),d&&(e[c]=d);return e}function f(a){for(var b=[],c=0,d=a.attributes,e=d.length;e>c;c++)b.push(d.item(c).nodeName);return b}function g(a,b){var g=document.createElement("picture"),h=e(a,f(a));c(g,b),d(g,h),a.parentNode.replaceChild(g,a)}var h,i,j,k=100;return{_pixelRatio:a.devicePixelRatio?Math.ceil(a.devicePixelRatio):1,_areMediaQueriesSupported:a.matchMedia&&null!==a.matchMedia("only all")&&a.matchMedia("only all").matches,_isAppendImageSupported:b(),isNecessary:!a.HTMLPictureElement,_getSrcsetHash:function(a){for(var b,c,d,e={},f=a.split(","),g=0,h=f.length;h>g;g+=1){switch(b=f[g].trim().split(" "),b.length){case 1:d="1x";break;case 2:d=b[1];break;default:d=b[b.length-1]}c=b[0],e[d]=c}return e},_getSrcFromSrcsetHash:function(a,b){var c,d;if(c=a[b+"x"])return c;do b-=1,c=a[b+"x"];while(!c&&b>0);if(c)return c;for(d in a)return a[d];return null},_getSrcFromSourcesData:function(b){for(var c,d,e,f,g=0,h=b.length;h>g;g+=1)d=b[g],e=d.media,f=d.srcset,(!e||a.matchMedia(e).matches)&&(c=f?this._getSrcFromSrcsetHash(f,picturePolyfill._pixelRatio):d.src);return c},_createOrUpdateImage:function(a,b){var d=a.getElementsByTagName("img");d.length?d[0].setAttribute("src",b.src):picturePolyfill._isAppendImageSupported?c(a,b):g(a,b)},_getSourcesData:function(a){for(var b,c,d=[],g=a.getElementsByTagName("source"),h=0,i=g.length;i>h;h+=1)b=g[h],c=e(b,f(b)),c.srcset&&(c.srcset=picturePolyfill._getSrcsetHash(c.srcset)),d.push(c);return d},parse:function(a){var b,c,d,e;if(!this.isNecessary)return!1;d=(a||document).getElementsByTagName("picture");for(var f=0,g=d.length;g>f;f+=1)c=d[f],picturePolyfill._areMediaQueriesSupported?(b=h[c.getAttribute("data-cache-index")],b||(b=picturePolyfill._getSourcesData(c),h[i]=b,c.setAttribute("data-cache-index",i),i+=1),e=picturePolyfill._getSrcFromSourcesData(b)):e=c.getAttribute("data-default-src"),picturePolyfill._createOrUpdateImage(c,{src:e,alt:c.getAttribute("data-alt")});return f},_addListeners:function(){function b(){picturePolyfill.parse(document)}function c(){clearTimeout(j),j=setTimeout(b,k)}a.addEventListener?(a.addEventListener("resize",c),a.addEventListener("DOMContentLoaded",function(){b(),a.removeEventListener("load",b)}),a.addEventListener("load",b)):a.attachEvent&&(a.attachEvent("onload",b),a.attachEvent("onresize",c)),this.areListenersActive=!0},initialize:function(){return this.isNecessary?(h=[],i=0,void(this.areListenersActive||this._addListeners())):!1}}}(window);picturePolyfill.initialize();